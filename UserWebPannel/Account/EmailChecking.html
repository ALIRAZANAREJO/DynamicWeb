<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment Demo â€” AR House</title>
<style>
body {
  background:#0e0e0f;
  color:#fff;
  font-family:Inter, system-ui;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.payment-box {
  background:#171717;
  border-radius:16px;
  padding:30px;
  max-width:400px;
  width:100%;
  box-shadow:0 8px 20px rgba(0,0,0,0.6);
}
label{display:block;margin-top:10px;font-size:14px;color:#bfbfbf;}
input{width:100%;padding:10px;border-radius:8px;background:#111;border:1px solid #333;color:#fff;margin-top:4px;}
button{
  margin-top:16px;width:100%;padding:12px 18px;border:none;
  border-radius:24px;background:#6ab8ff;color:#111;font-weight:700;
  cursor:pointer;transition:0.3s;
}
button:hover{background:#8dc9ff;}
</style>
</head>
<body>

<div class="payment-box">
  <h2 style="text-align:center;color:#6ab8ff;">JazzCash Payment</h2>
  <label>Payer Name</label><input id="payern01" type="text" placeholder="Your name">
  <label>Phone Number</label><input id="telephone01" type="text" placeholder="03XX-XXXXXXX">
  <label>CNIC No</label><input id="Cnic" type="text" placeholder="Enter CNIC e.g. 42101-XXXXXXX-X">
  <label>Transaction ID</label><input id="transactionid01" type="text" placeholder="Enter Transaction ID">
  <button class="submit-btn">Submit for Verification</button>
</div>

<!-- ========== Firebase Auth Demo Script ========== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

/* ---------------- FIREBASE CONFIG - UPDATE THIS ---------------- */
const firebaseConfig = {
  apiKey: "AIzaSyCmL8qcjg4S6NeY3erraq_XhlDJ7Ek2s_E",
  authDomain: "palestine-web.firebaseapp.com",
  databaseURL: "https://palestine-web-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "palestine-web",
  storageBucket: "palestine-web.appspot.com",
  messagingSenderId: "35190212487",
  appId: "1:35190212487:web:0a699bb1fa7b1a49113522",
  measurementId: "G-8TE04Z9ZFW"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// ðŸ”¹ Function: Ensure user logged in
async function ensureUserLoggedIn() {
  return new Promise((resolve, reject) => {
    const user = auth.currentUser;
    if (user) return resolve(user);

    const loader = document.createElement('div');
    loader.textContent = "Checking account...";
    loader.style.cssText = `
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:#000a;color:#fff;display:flex;
      justify-content:center;align-items:center;
      font-size:18px;z-index:9999;
    `;
    document.body.appendChild(loader);

    signInWithPopup(auth, provider)
      .then(result => {
        document.body.removeChild(loader);
        resolve(result.user);
      })
      .catch(err => {
        document.body.removeChild(loader);
        alert("Login failed: " + err.message);
        reject(err);
      });
  });
}

// ðŸ”¹ Handle Submit
document.querySelector('.submit-btn').addEventListener('click', async e => {
  e.preventDefault();
  const btn = e.target;
  btn.disabled = true;
  btn.textContent = "Checking account...";

  try {
    const user = await ensureUserLoggedIn();
    localStorage.setItem("userEmail", user.email);
    console.log("âœ… Logged in as:", user.email);
    alert("Payment submitted for verification by: " + user.email);
  } catch (err) {
    console.error(err);
  }

  btn.disabled = false;
  btn.textContent = "Submit for Verification";
});
</script>
</body>
</html>
